#그래픽 객체의 사용

그래픽 출력은 크게 GDI(Graphics Deive InterFace)와 DC(Device Context)라는 두 가지 개념으로 설명 될 수 있다.

1) 그래픽 디바이스 인터페이스(GDI: Graphics Deive InterFace)\n
윈도우를 설치하면 비디오 카드와 맞는 디바이스 드라이버를 윈도우가 설정해준다.\n
그래픽을 출력하고자 하는 애플리케이션은 윈도우에게 요청을 하고 윈도우는 디바이스 드라이버를 호출하면 디바이스 드라이가 하드웨어를 구동시킨다.\n
이렇게 하면 하드웨어의 종류와 관게없이 항상 같은 명령어를 이용하여 그래픽을 출력할 수 있어 하드웨어에 독립적인 작업을 할 수 있다.

이때, 윈도우가 하드웨어를 제어할 수 있도록 애플리케이션에 제공하는 모든 기능을 일컬어 그래픽 디바이스 이넡페이스라고 한다.\n
즉, 그래픽 디바이스 인터페이스는 애플리케이션과 디바이스 드라이버의 중간 다리 역할을 하는 것으로 애플리케이션에 대한 장치 독립적인 그래픽 동작을 수행한다.

2) 디바이스 컨텍스트(DC : device Context)\n
윈도우 프로그램은 윈도우의 화면에 출력되는 모든 내용을 DC를 이용하여 출력하게 된다.\n
DC는 그래픽 객체들의 속성과 그래픽 코드를 정의하는 자료의 집합체로 출력 장치에 정보를 표시할 때 필요한 정보를 저장하는 자료구조이다.

DC는 애플리케이션과 출력 장치를 연결하는 역할을 하며 애플리케이션이 출력에 대한 허가를 받도록 하고 또한 그려지는 영역을 경정하는 역할을 한다.\n
DC를 사용하는 이유는 하드웨어 독립적인 출력을 할 수 있어 출력 장치에 상관없이 같은 방법으로 출력을 설정할 수 있기 때문이다.

그래픽 객체의 속성에 관련된 모든 옵션이 디폴트로 설정되어 있어 그냥 간단히 출력하고자 할 때는 디폴트로 설정된 DC를 이용하여 바로 출력하면 되고 세세한 것을 제어하고자 할 때는 DC에 설정된 내용을 바꾼 후에 출력하면 된다.\n
DC는 한순간에 하나의 펜, 브러쉬만 가질 수 있어 다른 펜이나 다른 브러쉬를 사용하려면 새로운 것을 만들어서 DC에 설정해주어야 한다. 윈도우에서 출력하려면 먼저 DC를 얻어야 한다.

[ OnDraw() 함수나 OnPaint() 함수를 이용하는 방법 ]\n
OnDraw() 함수에서 인자로 넘어온 CDC 클래스를 받거나 OnPaint() 함수에서 CPaintDC 클래스를 받아 이용한다.\n
화면의 변화가 생겼을 때 계속해서 OnDraw() 함수나 OnPaint() 함수를 호출하기 때문에 윈도우의 크기가 변하거나 다른 프로그램으로 가려졌다가 다시 출력되어도 화면 출력이 변하지 않는다.

[ GetDC() 함수를 이용하는 방법 ]\n
GetDC() 함수를 이용하여 CDC 클래스의 인스턴스를 포인터 형태로 넘겨받아 이용한다.\n
그래픽 작업을 종료한 후에 반드시 ReleaseDC() 함수를 호출하여 시스템에 DC를 반환해야 한다.\n
이 방법으로 DC를 얻는 것은 일시적인 것으로 윈도으의 크기가 변하면 출력된 내용이 사라진다.\n
그 이유는 화면의 변화가 생겼을 때 WM_PAINT 메시지가 호출 되고 OnDraw() 함수나 OnPaint() 함수가 호출되면서 화면이 갱신되기 때문이다.

[ CClientDC 클래스를 이용하는 방법 ]\n
CDC 클래스의 파생 클래스인 CClientDC 클래스를 이용하는 방법으로 CClientDC클래스는 생성자 함수에서 GetDC() 함수를 호출하고 소멸자 함수에서 ReleaseDC() 함수 에서 호출한다.\n
그래서 CClientDC 클래스의 객체 생성 시 초깃값으로 작업할 영역에 속한 윈도우의 this 포인터를 넘겨준다.\n
이 방법도 GetDC() 함수를 이용하는것과 같이 DC를 얻는것은 일시적인 것으로 윈도우가 크기가 변하면 출력한 내용이 사라진다.

[ CWindowDC 클래스를 이용하는 방법 ]\n
위의 3가지 방법은 클라이언트의 영역을 얻는 방법이다.\n
CWindowDC 클래스는 클라이언트의 영역이 아닌 윈도우 영역에 그래픽을 출력하고자 할 때 이용한다.\n
이 방법은 GetWindowDC() 함수를 이용하여 CWindowDC 크랠스의 인스턴스를 포인터 형태로 넘겨받아 이용한다. 그래픽 작업을 종료한 후에 반드시 ReleaseDC() 함수를 호출하여 시스템에 DC를 반환해야 한다.

